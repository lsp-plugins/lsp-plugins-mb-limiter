<plugin resizable="true">
	<grid rows="3" cols="5" vspacing="4" hspacing="4">
		<!-- Row 1: Graph -->
		<group ui:inject="GraphGroup" ipadding="0" expand="true" fill="true" text="labels.graphs.spectrum">
			<graph width.min="640" height.min="320" expand="true" fill="true">
				<origin hpos="-1" vpos="-1" visible="false"/>

				<!-- Additional grid -->
				<ui:with color="graph_alt_1">
					<ui:for id="f" first="20" last="90" step="10">
						<marker v="${:f}"/>
						<marker v="${:f*10}"/>
						<marker v="${:f*100}"/>
					</ui:for>
					<marker v="20000"/>
					<ui:with ox="1" oy="0">
						<marker v="+12 db"/>
						<marker v="-12 db"/>
						<marker v="-36 db"/>
						<marker v="-60 db"/>

						<ui:for id="g" first="-42" last="6" step="12">
							<marker v="${g} db" visibility=":zoom le -9 db"/>
						</ui:for>
						<ui:for id="g" first="-21" last="3" step="6">
							<marker v="${g} db" visibility=":zoom le -15 db"/>
						</ui:for>
					</ui:with>
				</ui:with>

				<!-- Secondary grid -->
				<ui:with color="graph_sec">
					<marker v="100"/>
					<marker v="1000"/>
					<marker v="10000"/>
					<marker value="0 db" ox="1" oy="0"/>
					<marker value="-24 db" ox="1" oy="0"/>
					<marker value="-48 db" ox="1" oy="0"/>
				</ui:with>

				<!-- Band markers -->
				<ui:with
					width="2"
					fill="0.5"
					color.a="0.2"
					hcolor.a="0.8"
					lcolor.a="0.8"
					hlcolor.a="0.8"
					rcolor.a="0.8"
					hrcolor.a="0.8"
					color="graph_marker_cycle"
					hcolor="graph_marker_cycle"
					lcolor="graph_marker_cycle"
					hlcolor="graph_marker_cycle"
					rcolor="graph_marker_cycle"
					hrcolor="graph_marker_cycle">
					
					<marker v="10" color.hue="0" hcolor.hue="0" rborder="16" rcolor.hue="0" hrborder="16" hrcolor.hue="0"/>
					<marker id="bfe_1" color.hue="0" hcolor.hue="0" lborder="16" lcolor.hue="0" hlborder="16" hlcolor.hue="0"/>
					<ui:for id="i" first="1" count="7">
						<marker id="sf_${i}" visibility=":se_${i}" editable="true"
							color.hue="${:i * 0.125}" hcolor.hue="${:i * 0.125}"
							rborder="16" rcolor.hue="${:i * 0.125}" hrborder="16" hrcolor.hue="${:i * 0.125}"
							pointer="hsize" />
						<marker id="bfe_${:i+1}" visibility=":se_${i}"
							color.hue="${:i * 0.125}" hcolor.hue="${:i * 0.125}"
							lborder="16" lcolor.hue="${:i * 0.125}"
							hlborder="16" hlcolor.hue="${:i * 0.125}"/>
					</ui:for>
				</ui:with>

				<!-- Meshes -->
				<mesh id="bfc_1" width="2"
					fill="true" smooth="true"
					color="graph_mesh_cycle" color.hue="0"
					fcolor="graph_mesh_cycle" fcolor.hue="0"
					fcolor.a="0.9" visibility=":flt"/>
				<ui:for id="i" first="1" count="7">
					<mesh id="bfc_${:i+1}" width="2"
						fill="true" smooth="true"
						color="graph_mesh_cycle" color.hue="${:i * 0.125}"
						fcolor="graph_mesh_cycle" fcolor.hue="${:i * 0.125}" fcolor.a="0.9"
						visibility=":flt and :se_${:i}" />
				</ui:for>
				
				<mesh id="ifg_l" width="0" color="left_in" color.a="0.8" fcolor.a="0.8" fill="true" fcolor="left_in" visibility=":ife_l"/>
				<mesh id="ifg_r" width="0" color="right_in" color.a="0.8" fcolor.a="0.8" fill="true" fcolor="right_in" visibility=":ife_r"/>
				<mesh id="ofg_l" width="3" color="left" visibility=":ofe_l"/>
				<mesh id="ofg_r" width="3" color="right" visibility=":ofe_r"/>

				<mesh id="ag_l" width="3" color="left" smooth="true"/>
				<mesh id="ag_r" width="3" color="right" smooth="true"/>

				<!-- Axis -->
				<axis min="10" max="24000" angle="0.0" log="true" visibility="false"/>
				<axis min="-72 db / (:zoom ** 3)" max="24 db * :zoom" color="graph_prim" angle="0.5" log="true"/>
				<axis min="-1" max="1" visibility="false" angle="0.5"/>

				<!-- Text -->
				<ui:with ox="0" oy="2" y="0" halign="1" valign="1">
					<text x="10" text="graph.units.hz"/>
					<text x="20" text="20"/>
					<text x="30" text="30"/>
					<text x="50" text="50"/>
					<text x="100" text="100"/>
					<text x="200" text="200"/>
					<text x="300" text="300"/>
					<text x="500" text="500"/>
					<text x="1000" text="graph.values.x_k" text:value="1"/>
					<text x="2000" text="graph.values.x_k" text:value="2"/>
					<text x="3000" text="graph.values.x_k" text:value="3"/>
					<text x="5000" text="graph.values.x_k" text:value="5"/>
					<text x="10000" text="graph.values.x_k" text:value="10"/>
					<text x="20000" text="graph.values.x_k" text:value="20"/>
				</ui:with>

				<ui:with x="10" halign="1" valign="1">
					<ui:for id="g" first="-60" last="12" step="12">
						<text y="${g} db" text="${g}"/>
					</ui:for>
					<text y="0 db" ox="0" oy="2" text="graph.units.db" valign="-1"/>
					<ui:for id="g" first="-42" last="6" step="12">
						<text y="${g} db" text="${g}" visibility=":zoom le -9 db"/>
					</ui:for>
					<ui:for id="g" first="-21" last="3" step="6">
						<text y="${g} db" text="${g}" visibility=":zoom le -15 db"/>
					</ui:for>
				</ui:with>
			</graph>
		</group>
		
		<!--  Row 1: zoom -->
		<cell rows="2">
			<vbox vexpand="true" bg.color="bg_schema">
				<label font.name="lsp-icons" font.size="12" font.antialias="true" text="E" color="text_icon" pad.b="4" pad.t="4"/>
				<fader id="zoom" angle="1" vexpand="true" bg.inherit="true" flat="true"/>
				<value id="zoom" width="40"/>
			</vbox>
		</cell>
		<!--  Row 1: meter in -->
		<cell rows="2">
			<vbox vexpand="true" bg.color="bg_schema">
				<label text="labels.chan.in" pad.b="3" pad.t="3"/>
				<ledmeter vexpand="true" angle="1">
					<ledchannel id="ilm_l" min="-72 db" max="12 db" log="true" type="rms_peak" peak.visibility="true" value.color="left_in"/>
					<ledchannel id="ilm_r" min="-72 db" max="12 db" log="true" type="rms_peak" peak.visibility="true" value.color="right_in"/>
				</ledmeter>
			</vbox>
		</cell>

		<!--  Row 1: meter out -->
		<cell rows="2">
			<vbox vexpand="true" bg.color="bg_schema">
				<label text="labels.chan.out" pad.b="3" pad.t="3"/>
				<ledmeter vexpand="true" angle="1">
					<ledchannel id="olm_l" min="-72 db" max="12 db" log="true" type="rms_peak" peak.visibility="true" value.color="left"/>
					<ledchannel id="olm_r" min="-72 db" max="12 db" log="true" type="rms_peak" peak.visibility="true" value.color="right"/>
				</ledmeter>
			</vbox>
		</cell>

		<!--  Row 1: signal -->
		<cell rows="2">
			<vbox spacing="4">
				<group text="groups.signal" expand="true">
					<grid rows="4" cols="2" hspacing="4">
						<knob id="g_in" pad.r="4"/>
						<vbox vfill="false">
							<label text="labels.input" halign="0"/>
							<value id="g_in" sline="true" halign="0"/>
						</vbox>

						<knob id="g_out" pad.r="4"/>
						<vbox vfill="false">
							<label text="labels.output" expand="true" halign="0"/>
							<value id="g_out" width.min="50" sline="true" halign="0"/>
						</vbox>
					</grid>
				</group>

				<!-- Analysis -->
				<group text="groups.analysis" expand="true" ipadding="0">
					<vbox>
						<grid rows="4" cols="2">
							<align halign="-1" pad.t="4" pad.l="6">
								<label text="labels.fft.fft_in"/>
							</align>
							<hbox spacing="4" pad.v="4" pad.h="6" hfill="false">
								<button id="ife_l" text="labels.chan.L_eft" size="19" ui:inject="Button_left_8"/>
								<button id="ife_r" text="labels.chan.R_ight" size="19" ui:inject="Button_right_8"/>
							</hbox>

							<cell cols="2"><hsep pad.v="2" bg.color="bg" vreduce="true"/></cell>

							<align halign="-1" pad.t="4" pad.l="6">
								<label text="labels.fft.fft_out" halign="0"/>
							</align>
							<hbox spacing="4" pad.v="4" pad.h="6" hfill="false">
								<button id="ofe_l" text="labels.chan.L_eft" size="19" ui:inject="Button_left_8"/>
								<button id="ofe_r" text="labels.chan.R_ight" size="19" ui:inject="Button_right_8"/>
							</hbox>

							<cell cols="2"><hsep pad.v="2" bg.color="bg" vreduce="true"/></cell>
						</grid>

						<grid rows="2" cols="2" transpose="false" expand="true" hspacing="4">
							<knob id="react" size="20" pad.r="4" pad.l="6"/>
							<vbox vfill="false" pad.r="6">
								<label text="labels.metering.reactivity" halign="0"/>
								<value id="react" width.min="50" sline="true" halign="0"/>
							</vbox>

							<knob id="shift" size="20" pad.r="4" pad.l="6"/>
							<vbox vfill="false" pad.r="6">
								<label text="labels.metering.shift" halign="0"/>
								<value id="shift" width.min="50" sline="true" halign="0"/>
							</vbox>
						</grid>
					</vbox>
				</group>
			</vbox>
		</cell>
		
		<!-- Row 2: bottom line -->
		<align halign="-1" vreduce="true">
			<hbox spacing="4" vreduce="true" bg.color="bg_schema" pad.h="6">
				<label text="labels.sc_boost:"/>
				<combo id="envb" pad.r="8"/>
				<label text="labels.oversampling:"/>
				<combo id="ovs" pad.r="8" pad.v="4"/>
				<label text="labels.dither:"/>
				<combo id="dither" pad.r="8" pad.v="4"/>
				<button id="flt" text="labels.filters" size="22" ui:inject="Button_cyan"/>
			</hbox>
		</align>
	
		<!-- Row 3: limiter bands -->
		<cell cols="4">
			<group text="LIMITER BANDS"> <!-- TODO -->
				<grid rows="18" cols="14">
					<!-- Row 1 -->
					<cell rows="2" cols="2">
						<label text="labels.range" />
					</cell>
					<cell rows="2">
						<label text="labels.controls" />
					</cell>
					<cell cols="3">
						<label text="labels.alr" />
					</cell>
					<cell cols="8">
						<label text="labels.plug.limiter" />
					</cell>
					
					<!-- Row 2 -->
					<label text="labels.attack" />
					<label text="labels.release" />
					<label text="labels.knee" />
					
					<label text="labels.preamp" />
					<label text="labels.mode" />
					<label text="labels.thresh_old" />
					<label text="labels.attack" />
					<label text="labels.release" />
					<label text="labels.stereo_link" />
					<label text="labels.makeup" />
					<label text="labels.reduction" />
					
					<ui:for id="i" first="1" count="8">
						<!-- Row 1 -->
						<ui:if test=":i ile 1">
							<void />
							<void />
						</ui:if>
						<ui:if test=":i igt 1">
							<button id="se_${:i-1}" text="labels.chan.ON" />
							<knob id="sf_${:i-1}" />
						</ui:if>
						
						<cell rows="2">
							<grid rows="2" cols="2">
								<button id="bs_${i}" text="labels.chan.S_olo" height="19" hfill="true" ui:inject="Button_green_8"/>
								<button id="on_${i}" text="labels.chan.ON" height="19" hfill="true" ui:inject="Button_yellow_8"/>
								
								<button id="bm_${i}" text="labels.chan.M_ute" height="19" hfill="true" ui:inject="Button_red_8"/>
								<button id="alr_${i}" text="labels.alr" height="19" hfill="true" ui:inject="Button_yellow_8"/>
							</grid>
						</cell>
						<knob id="aat_${i}" />
						<knob id="art_${i}" />
						<knob id="akn_${i}" />
						
						<knob id="bpa_${i}" />
						<cell rows="2">
							<vbox>
								<combo id="lm_${i}" />
								<button id="gb_${i}" pad.h="6" height="18" width="70" text="labels.boost_" ui:inject="Button_violet_8"/>
							</vbox>
						</cell>
						<knob id="th_${i}" />
						<knob id="at_${i}" />
						<knob id="rt_${i}" />
						<knob id="bsl_${i}" />
						<knob id="bmk_${i}" />
						<cell rows="2">
							<ledmeter>
								<ledchannel id="rlm_l" min="-72 db" max="12 db" log="true" type="rms_peak" peak.visibility="true" value.color="left"/>
								<ledchannel id="rlm_r" min="-72 db" max="12 db" log="true" type="rms_peak" peak.visibility="true" value.color="right"/>
							</ledmeter>
						</cell>
						
						<!-- Row 2 -->
						<cell cols="2">
							<hbox>
								<ui:if test=":i ile 1">
									<label text="0" />
									<label text="-" />
									<value id="bfe_${i}" detailed="false" />
								</ui:if>
								<ui:if test=":i igt 1">
									<value id="sf_${:i-1}" detailed="false" />
									<label text="-" />
									<value id="bfe_${i}" detailed="false" />
								</ui:if>
							</hbox>
						</cell>
						<value id="aat_${i}" sline="true" />
						<value id="art_${i}" sline="true" />
						<value id="akn_${i}" sline="true" />
						<value id="bpa_${i}" sline="true" />
						<value id="th_${i}" sline="true" />
						<value id="at_${i}" sline="true" />
						<value id="rt_${i}" sline="true" />
						<value id="bsl_${i}" sline="true" />
						<value id="bmk_${i}" sline="true" />
						
					</ui:for>

				</grid>
			</group>
		</cell>
		<group text="MAIN LIMITER"> <!-- TODO -->
		</group>
	</grid>
</plugin>
